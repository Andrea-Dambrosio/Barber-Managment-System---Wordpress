<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"> -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src='<?php echo plugin_dir_url(__FILE__); ?>fullcalendar-scheduler/dist/index.global.js'></script>
    <!-- date picker  -->
    <script src='<?php echo plugin_dir_url(__FILE__); ?>datePicker/air-datepicker.min.js'></script>

    <!-- SEARCH -->
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-beta.1/dist/js/select2.min.js"></script>
    <link href="
        <?php echo plugin_dir_url(__FILE__); ?>datePicker/air-datepicker.min.css
        " rel="stylesheet">

    <link rel="stylesheet" href="<?php echo plugin_dir_url(__FILE__); ?>calendar.css">
    <title>Gestionale</title>
</head>

<body>
    <!-- Overlay -->
    <div id="overlay"></div>
    <!-- MENU -->


    <div id="calendar"></div>

    <div id="eventPopoverContent" style="display: none;">
        <form id="evento" class="bg-light rounded active" autocomplete="off">
            <div class="scorrimento">
                <div class="mb-3">
                    <label for="nome_cliente" class="form-label">Cliente</label> <i class="fas fa-plus"
                        onclick="creaCliente()"></i>
                    <input type="text" class="form-control" id="nome_cliente" required placeholder="Nome e cognome">
                </div>
                <div id="lista_clienti">

                </div>
                <div class="mb-3">
                    <label for="servizio" class="form-label">Servizio</label>
                    <select class="form-select" id="servizio" oninput="checkTeam()" required>
                        <option selected value="">Scegli un servizio...</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label for="membro_team" class="form-label">Team</label>
                    <select class="form-select" id="membro_team" required>
                        <option selected>Scegli un membro del team...</option>

                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Durata</label>
                    <select id="durata" class="form-control">
                        <option value="00:10:00">0.10h</option>
                        <option value="00:20:00">0.20h</option>
                        <option value="00:30:00">0.30h</option>
                        <option value="00:40:00">0.40h</option>
                        <option value="00:50:00">0.50h</option>
                        <option value="01:00:00">1.00h</option>
                        <option value="01:10:00">1.10h</option>
                        <option value="01:20:00">1.20h</option>
                        <option value="01:30:00">1.30h</option>
                        <option value="01:40:00">1.40h</option>
                        <option value="01:50:00">1.50h</option>
                        <option value="02:00:00">2.00h</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="note" class="form-label">Note</label>
                    <textarea class="form-control" id="note" rows="3"></textarea>
                </div>
            </div>
            <div class="pulsantiPoupup">
                <div id = "realTimeManagment">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="inNegozio">
                    <label class="form-check-label" for="inNegozio">
                        In negozio
                    </label>
                </div>
                <p id = "pagamentoClick" onclick="pagamentoForm()">
                    Pagamento
                    <i class="fas fa-thumbs-up" id = "pagamentoEffettuato"></i>
                </p>
                </div>
                <div>
                    <button type="submit" class="btn btn-primary">Aggiorna Dati</button>
                    <i id="elimina-appuntamento" class="fas fa-trash-alt"></i>
                </div>
            </div>
        </form>
        <form id="pagamentoForm" >
            <p></p>
            <div class="mb-3">
                <label for="metodo-pagamento" class="form-label">Metodo di Pagamento</label>
                <select class="form-select" id="metodo_pagamento" required>
                    <option selected value="">Scegli un metodo di pagamento...</option>
                    <option value="contanti">Contanti</option>
                    <option value="carta">Carta</option>
                </select>
            </div>
            <div class="mb-3">
                <label for="importo" class="form-label">Importo</label>
                <input type="number" class="form-control" id="importo" min = "0" required placeholder="Inserisci l'importo">
            </div>
        <div class="mb-3">
            <label for="prodottiSelect" class="form-label">Prodotti</label>
            <select id="prodottiSelect" class="form-control mt-2" multiple></select>
        </div>
            <div class="d-flex justify-content-between align-items-end gap-3 py-2">
                <button type="submit" value="confirm" class="btn btn-primary">Conferma Pagamento</button>
                <button type="submit" value="delete" class="btn btn-danger">Elimina Pagamento</button>
            </div>
        </form>
        <form id="creaCliente" autocomplete="off">
            <div class="mb-3">
                <label for="nome" class="form-label">Nome</label>
                <input type="text" class="form-control" id="nome" required placeholder="Inserisci un nome">
            </div>
            <div class="mb-3">
                <label for="cognome" class="form-label">Cognome</label>
                <input type="text" class="form-control" id="cognome" required placeholder="Inserisci un cognome">
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Indirizzo Email</label>
                <input type="email" id="email" class="form-control" placeholder="Inserisci una email"
                    aria-describedby="emailHelp">
                <span style="color: red; display: none;">Email non presente</span>
            </div>
            <div class="mb-3">
                <label for="telefono" class="form-label">Telefono</label>
                <input type="tel" class="form-control" id="telefono" placeholder="Inserisci un numero"
                    pattern="^\+?[0-9]{10,15}$" required>
                <span style="color: red; display: none;">Telefono non presente</span>
            </div>
            <button type="submit" class="btn btn-primary">Crea Cliente</button>
        </form>

        <button type="button" id="close" onclick="hideTooltip()">&times;</button>
    </div>
    <input id="datePicker"></input>
</body>

</html>
<script>
const userId = <?php echo get_current_user_id(); ?>;
const adminRole = <?php echo current_user_can("membro_negozio") ? 0 : 1; ?>
</script>
<script src="<?php echo plugin_dir_url(__FILE__); ?>calendar.js"></script>